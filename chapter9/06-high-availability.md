## 第六节 高可用

### 6.1 ZooKeeper 宕机与 Dubbo 直连

现象：zookeeper 注册中心宕机，还可以消费 dubbo 暴露的服务。


原因（健壮性）：

1. 监控中心宕掉不影响使用，只是丢失部分采样数据

2. 数据库宕掉后，注册中心仍能通过缓存提供服务列表查询，但不能注册新服务

3. 注册中心对等集群，任意一台宕掉后，将自动切换到另一台

4. **注册中心全部宕掉后，服务提供者和服务消费者仍能通过本地缓存通讯**

5. 服务提供者无状态，任意一台宕掉后，不影响使用

6. 服务提供者全部宕掉后，服务消费者应用将无法使用，并无限次重连等待服务提供者恢复

高可用：通过设计，减少系统不能提供服务的时间；

##### Dubbo 直连

```java
@Reference(url="127.0.0.1:20882")
UserService userService; 
```

### 6.2 负载均衡机制



### 6.3 服务降级




### 6.4 服务容错 & Hystrix



### 6.5 